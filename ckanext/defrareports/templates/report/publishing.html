{% block primary %}
  {% for row in table %}
    <h3>{{ row.title }} </h3>
    <div id="chart_{{row.name}}"></div>
    <hr />
  {% endfor %}
{% endblock %}
{% block scripts %}
  <script>
    document.addEventListener("DOMContentLoaded", function() {
      {% for row in table %}
        c3.generate({
          bindto: '#chart_{{row.name}}',
          size: {
              height: 350,
              width: 600
          },
          data: {
            x: 'x',
            columns: [
              {{ h.copy_and_merge(12, row, ['x']) | safe }},
              {{ h.report_row('New records', row, 'added') | safe }},
              {{ h.report_row('Updated records', row, 'modified') | safe }}
            ]
          },
          axis: {
            x: {
              type: 'timeseries',
              tick: {
                format: function (x) {
                  return monthNames[x.getMonth()] + " " + x.getFullYear();
                }
              }
            }
          }
        });
      {% endfor %}
    });
  </script>
{% endblock scripts %}