
{% block primary %}
  <link rel="stylesheet" href="/css/c3.min.css" />
  {% resource 'defrareports/d3.min.js' %}
  {% resource 'defrareports/c3.min.js' %}

  <script>
  const monthNames = ["Jan", "Feb", "Mar", "Apr", "May", "Jun",
                      "Jul", "Aug", "Sep", "Oct", "Nov", "Dec"];
  </script>

    {% for row in table %}
        <h3>{{ row.title }} </h3>

        <div id="chart_{{row.name}}"></div>
        <script>
            c3.generate({
                bindto: '#chart_{{row.name}}',
                data: {
                   x: 'x',
                   columns: [
                        {{ h.copy_and_merge(12, row, ['x']) | safe }},
                        {{ h.report_row('Visited', row, 'visited') | safe }},
                        {{ h.report_row('In search results', row, 'search') | safe }}
                    ]
                },
                axis : {
                    x : {
                        type : 'timeseries',
                        tick: {
                            format: function (x) { return  monthNames[x.getMonth()] + " " + x.getFullYear(); }
                        }
                    }
                }
            });
        </script>
        <hr/>
    {% endfor %}
{% endblock %}
